<app-admin-header></app-admin-header>
<router-outlet></router-outlet>
<div class="card">
  <div class="card-body">
<!--    <span style="display:block; height:50px;"></span>-->
    <div><p>Zum wählen einer Tour, bei der gewünschten Tour das Datum eingeben.</p></div>
    <table class="table table-bordered table-striped table-hover table-responsive table-sm">
      <thead class="thead-dark">
      <tr>
        <th scope="col">Datum</th>
        <th scope="col">Tour</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let tour of tours">
        <td><input type="date" [(ngModel)]="dates.date" (change)="showOrders(tour)"></td>
        <td>{{ tour.number }}</td>
      </tr>
      </tbody>
    </table>
  </div>
<!--</div>-->
<!--<div class="card my-5">-->
  <div class="card-body">
    <table class="table table-bordered table-striped table-hover table-responsive table-sm">
      <thead class="thead-dark">
      <tr>
        <th scope="col">Pos</th>
        <th scope="col">Datum</th>
        <th scope="col">Produkt</th>
        <th scope="col">Grösse</th>
        <th scope="col">Bestellt</th>
        <th scope="col">Text</th>
        <th scope="col">Geliefert</th>
        <th scope="col">Adresse</th>
      </tr>
      </thead>
      <div *ngFor="let child of categories">
        <span><input class="form-check-input" type="checkbox" name="{{child.category}}" #name="ngModel" ngModel (change)="save(child.products)" title="Alles geliefert"></span>
        <span style="display:block; width:50px;"></span>
        <span>{{child.category}}</span>
        <tbody>
        <tr *ngFor="let userOrderTourAddress of child.products">
          <td>{{ userOrderTourAddress.userbindtour.position}}</td>
          <td>{{ userOrderTourAddress.order.date.date |date}}</td>
          <td>{{ userOrderTourAddress.order.productBindInfos.product.name}}</td>
          <td>{{ userOrderTourAddress.order.productBindInfos.productDetails.size}} {{ userOrderTourAddress.order.productBindInfos.productDetails.unit}}</td>
          <td [ngStyle]="{'color': 'brown'}"><b>{{userOrderTourAddress.order.quantityOrdered}}</b></td>
          <td [ngStyle]="{'color': 'red'}"> {{userOrderTourAddress.order.text}}</td>
<!--          <td><input input class="form-control input-sm" type="number"  min="0" [(ngModel)]="name.value ? changeValue(userOrderTourAddress): userOrderTourAddress.order.quantityDelivered"></td>-->
          <td><input input class="form-control input-sm" type="number"  min="0" [(ngModel)]="userOrderTourAddress.order.quantityDelivered"  (change)="save1(userOrderTourAddress)"></td>
          <td (click)="googleMaps(userOrderTourAddress)" title="Google Maps"><ins>{{userOrderTourAddress.address.street}} {{userOrderTourAddress.address.number}} {{userOrderTourAddress.address.plz}}</ins></td>
        </tr>
        </tbody>
      </div>
      <button type="button" (click)='apply()' class="btn-light">Speichern</button>
    </table>
  </div>
<!--</div>-->
<div *ngIf="error" class="alert alert-danger">
  {{ error }}
</div>
<div *ngIf="success" class="alert alert-success">
  {{ success }}
</div>
<!--<div class="card my-5">-->
  <div class="card-body">
    <table class="table table-bordered table-striped table-hover table-responsive table-sm">
      <thead class="thead-dark">
      <tr>
        <th scope="col">Produkt</th>
        <th scope="col">Kategorie</th>
        <th scope="col">Datum</th>
        <th scope="col">Anzahl</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let productBindInfoCount of productBindInfoCounts">
        <td>{{ productBindInfoCount.productbindinfos.product.name}}</td>
        <td>{{ productBindInfoCount.productbindinfos.productDetails.category}}</td>
        <td>{{ dates.date |date: 'fullDate'}}</td>
        <td>{{ productBindInfoCount.counter}}</td>
      </tr>
      </tbody>
    </table>
    <div><button type="button"(click)='reset()' class="btn-light">Alle zurücksetzen</button></div>
  </div>
<!--</div>-->
<div *ngIf="error1" class="alert alert-danger">
  {{ error1 }}
</div>
<div *ngIf="success1" class="alert alert-success">
  {{ success1 }}
</div>
<!--<div class="card my-5">-->
  <div class="card-body">
    <div class="input-group mb-3 w-100 h-25">
      <form (ngSubmit)="onSubmit()" #Form="ngForm">
        <div class="form-group">
          <label for="toEmail">Email an</label>
          <input type="text" [(ngModel)]="emailData.toEmail"
                 class="form-control"
                 id="toEmail"
                 name="toEmail"
                 placeholder="Email an"
                 required #toEmail="ngModel">
        </div>
        <div [hidden]="!toEmail.pristine" class="alert alert-danger">Email an ist nötig</div>
        <button type="submit" [disabled]="!Form.form.valid"
                class="btn btn-info">Email senden</button>
      </form>
    </div>
  </div>
<!--</div>-->
<div *ngIf="error2" class="alert alert-danger">
  {{ error2 }}
</div>
<div *ngIf="success2" class="alert alert-success">
  {{ success2 }}
</div>
<!--<div class="card my-5">-->
  <div class="card-body">
    <div class="input-group mb-3 w-100 h-25">
      <form #Form1="ngForm">
        <div class="form-group">
          <div class="form-group">
            <label for="file">Datei</label>
            <input type="file" [(ngModel)]="emailData.file"
                   class="form-control"
                   id="file"
                   name="file" (change)="uploadFile($event)">
          </div>
        </div>
      </form>
    </div>
    <div *ngIf="error3" class="alert alert-danger">
      {{ error3 }}
    </div>
    <div *ngIf="success3" class="alert alert-success">
      {{ success3 }}
    </div>
  </div>
</div>


